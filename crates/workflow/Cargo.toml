[package]
name = "edge-ai-workflow"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true

[dependencies]
edge-ai-core = { path = "../core" }
edge-ai-devices = { path = "../devices" }
edge-ai-alerts = { path = "../alerts" }
edge-ai-sandbox = { path = "../sandbox" }
edge-ai-storage = { path = "../storage" }

tokio = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
uuid = { workspace = true, features = ["v4", "serde"] }
chrono = { workspace = true }
anyhow = { workspace = true }
thiserror = { workspace = true }

# WASM support
wasmtime = { version = "26", features = ["async", "component-model"] }
wasmtime-wasi = { version = "26" }
wat = { version = "1", optional = true }
base64 = "0.22"

# Scheduling
tokio-cron-scheduler = "0.10"

# HTTP requests
reqwest = { version = "0.12", features = ["json"], optional = true }

# Storage
bincode = "1.3"
redb = "2.1"

# Logging
tracing = { workspace = true }

# Async utilities
async-trait = "0.1"
futures = { workspace = true }

# Image processing (optional)
image = { version = "0.25", optional = true }

[features]
default = ["http", "wat"]
image_processing = ["image"]
http = ["reqwest"]
wat = ["dep:wat"]

[dev-dependencies]
tokio = { workspace = true, features = ["test-util", "macros"] }
tempfile = "3"
